-- Get the local player's user ID
local userID = game.Players.LocalPlayer.UserId

-- Define a function to restart the raid
local function restartRaid()
    -- Enter the raid room
    local args = {
        [1] = "Room3"
    }
    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("EnterRaidRoom"):FireServer(unpack(args))

    -- Select the raid difficulty
    local args = {
        [1] = {
            ["difficulty"] = 1,
            ["roomName"] = "Room3",
            ["selectMapId"] = 50105
        }
    }
    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("SelectRaidsDifficulty"):FireServer(unpack(args))

    -- Select a higher raid difficulty
    local args = {
        [1] = {
            ["difficulty"] = 4,
            ["roomName"] = "Room3",
            ["selectMapId"] = 50105
        }
    }
    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("SelectRaidsDifficulty"):FireServer(unpack(args))

    -- Start the challenge raid map
    local args = {
        [1] = {
            ["userIds"] = {
                [1] = userID
            },
            ["roomName"] = "Room3"
        }
    }
    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("StartChallengeRaidMap"):InvokeServer(unpack(args))

    -- Teleport the local player to the raid room
    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("LocalPlayerTeleportSuccess"):InvokeServer()

    -- Wait for 240 seconds
    wait(240)

    -- Quit the raid map
    local map = {
        currentSlotIndex = 1,
        toMapId = 50201
    }
    args = {
        [1] = map
    }
    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("QuitRaidsMap"):InvokeServer(unpack(args))

    -- Teleport the local player to the new map
    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("LocalPlayerTeleportSuccess"):InvokeServer()

    -- Wait for 60 seconds before restarting the raid
    wait(60)

    -- Restart the raid
    restartRaid()
end

-- Start the raid
restartRaid()
